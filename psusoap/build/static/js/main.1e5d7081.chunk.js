(this.webpackJsonpsuttida105=this.webpackJsonpsuttida105||[]).push([[0],{142:function(e,t,a){e.exports=a(256)},147:function(e,t,a){},241:function(e,t,a){},254:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(147),a(51)),i=a(33),s=a(20),u=a.n(s),m=a(40),p=a(21),d=a(93),f=a.n(d);f.a.initializeApp({apiKey:"AIzaSyD9tZXwxYLKr16GoZxXL61qST6MbEIQ14Q",authDomain:"mini-project-1f085.firebaseapp.com",databaseURL:"https://mini-project-1f085.firebaseio.com",projectId:"mini-project-1f085",storageBucket:"mini-project-1f085.appspot.com",messagingSenderId:"8118581832",appId:"1:8118581832:web:60c61db17a959649f8f67d",measurementId:"G-CSJHZYBDTG"});var g=f.a,h=a(257),b=a(13),E=a(26),v=a(43),O=a(124),y=a(90),j=a.n(y),w=a(125),S=a.n(w),I={id:"",name:""},k={login:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a){var n,r,c,o,l,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("https://psusoap.herokuapp.com/",Object(v.a)({},e));case 2:n=t.sent,r=Object(p.a)(n.data.GetStudentDetailsResult.string,3),c=r[0],o=r[1],l=r[2],i=c+" : "+o+" "+l,localStorage.setItem("user",i),a({type:"LOGIN",id:c,name:o+" "+l});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},x=Object(b.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(v.a)({},e,{id:t.id,name:t.name});case"LOGOUT":return Object(v.a)({},e,{id:"",name:""});default:return e}}}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d,L=Object(b.e)(x,N(Object(b.a)(S.a,O.a))),C=function(){var e=Object(b.b)(k,Object(E.b)());return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(h.a.Item,{className:"text-big"},r.a.createElement(l.b,{to:"/show"},"My Gallery")),r.a.createElement(h.a.Item,{className:"text-big"},r.a.createElement(l.b,{to:"/upload"},"Upload")),r.a.createElement(h.a.Item,{className:"text-big"},localStorage.getItem("user")),r.a.createElement(h.a.Item,{className:"text-big"},r.a.createElement(l.b,{onClick:function(){localStorage.clear(),e.logout()},to:"/"},"logout"))))},U=a(99);var D=function(e){var t=Object(n.useState)({}),a=Object(p.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({id:"",name:""}),i=Object(p.a)(l,2),s=i[0],d=i[1],f=Object(n.useState)(""),h=Object(p.a)(f,2),b=h[0],E=h[1];Object(n.useEffect)((function(){v()}),[]);var v=function(){var t=localStorage.getItem("user");t?(e.history.push("/upload"),t=t.split(":"),d({id:t[0],name:t[1]})):e.history.push("/")},O=function(){E(""),o({})};function y(){return(y=Object(m.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.name,a=new Date,t=t.replace(/\s/g,""),t=a.getTime()+t,g.storage().ref(t).put(c),n="https://firebasestorage.googleapis.com/v0/b/mini-project-1f085.appspot.com/o/"+t+"?alt=media",console.log({name:c.name,url:n}),j({name:c.name,url:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){console.log(s),console.log(s.id.toString()),g.firestore().collection(s.id.toString()).doc().set(e).then((function(){console.log("Document successfully written!"),alert("\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e23\u0e39\u0e1b\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"),O()})).catch((function(e){alert("\u0e44\u0e21\u0e48\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e23\u0e39\u0e1b\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"),console.error("Error writing document: ",e)}))}return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("div",{style:{padding:30,textAlign:"center"}},r.a.createElement("h1",null,"UPLOAD"),r.a.createElement("div",null,""!=b&&r.a.createElement("div",null,r.a.createElement("img",{src:b,height:"500px"})),""==b&&r.a.createElement("div",null,r.a.createElement("input",{type:"file",multiple:!0,onChange:function(e){return function(e){o(e.target.files[0]),console.log(e.target.files[0]),E(URL.createObjectURL(e.target.files[0]))}(e)}})),r.a.createElement("div",{style:{padding:10}},r.a.createElement(U.a,{type:"primary",onClick:function(){return y.apply(this,arguments)}},"Upload")," ",r.a.createElement(U.a,{type:"primary",onClick:O},"Clear")))))},G=a(260),P=a(261),T=a(259),_=(a(241),function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(p.a)(t,2),c=a[0],o=a[1],l=Object(b.b)(k,Object(E.b)()),i=Object(E.c)((function(e){return e.user}));Object(n.useEffect)((function(){""!=i.id&&e.history.push("/show"),localStorage.getItem("user")?e.history.push("/show"):e.history.push("/")}),[]);var s=function(){var t=Object(m.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.login(c);case 2:e.history.push("/show");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"bg"},r.a.createElement(G.a,null,r.a.createElement(P.a,{className:"gutter-row",span:6}),r.a.createElement(P.a,{className:"gutter-row",span:6}),r.a.createElement(P.a,{className:"gutter-row",span:6}),r.a.createElement(P.a,{className:"gutter-row",span:6},r.a.createElement("div",{className:"flex-input"},r.a.createElement("div",null,r.a.createElement("h4",null,"PSU Passport Authentication"),r.a.createElement(T.a,{placeholder:"PSU Passport Account Name",onChange:function(e){o(Object(v.a)({},c,{username:e.target.value}))},style:{marginBottom:5}}),r.a.createElement(T.a,{placeholder:"Password",type:"password",onChange:function(e){o(Object(v.a)({},c,{password:e.target.value}))},style:{marginBottom:5}}),r.a.createElement("div",null,r.a.createElement(U.a,{type:"primary",onClick:s},"Login")))))))}),A=function(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],o=a[1],l={id:"",name:""};Object(b.b)(k,Object(E.b)());Object(n.useEffect)((function(){i()}),[]);var i=function(){var t=localStorage.getItem("user");t?(t=t.split(":"),l.name=t[1],l.id=t[0],(l.id="")?e.history.push("/"):(console.log(t),console.log(l.id),console.log(l.name),console.log(t[0]),l.id=t[0],console.log(l.id),function(){var e=[];g.firestore().collection(l.id.toString()).get().then((function(t){t.forEach((function(t){console.log(t.id," => ",t.data()),e.push(t.data())}))})).finally((function(){o(e)}))}())):e.history.push("/")};return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement(G.a,{gutter:16,style:{padding:30}},0==c.length?r.a.createElement("div",null,"Not Found"):c.map((function(e,t){return r.a.createElement(P.a,{span:6,style:{padding:10},key:t},r.a.createElement("div",{style:{backgroundImage:"url("+e.url+")",height:250,display:"flex",justifyContent:"center",alignItems:"center",backgroundPosition:"center",backgroundSize:500,backgroundRepeat:"no-repeat"}},r.a.createElement("h1",{className:"mark"},e.name)))}))))};a(254),a(255);var B=function(){return r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/upload",exact:!0,component:D}),r.a.createElement(i.a,{path:"/",exact:!0,component:_}),r.a.createElement(i.a,{path:"/show",exact:!0,component:A})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(E.a,{store:L},r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[142,1,2]]]);
//# sourceMappingURL=main.1e5d7081.chunk.js.map